{% extends "base.html" %}
{% load static cms_tags sekizai_tags %}

{% block title %}{{ member.name }} – {{ member.role }}{% endblock %}

{% block content %}
<div class="relative min-h-screen bg-gradient-to-b from-gray-50 to-white dark:from-gray-950 dark:to-black overflow-hidden">
  <!-- Hero / Profile -->
  <section class="relative pt-20 pb-32 md:pt-32 md:pb-48">
    <div class="container mx-auto px-6 lg:px-8 max-w-7xl">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-20 items-center">
        <!-- Photo + glass effect + tilt on hover -->
        <div class="relative group perspective-1000 mx-auto lg:mx-0 max-w-md lg:max-w-none">
          {% if member.photo %}
          <div class="relative transform-gpu transition-all duration-700 ease-out group-hover:rotate-y-10 group-hover:rotate-x-6 group-hover:scale-[1.03] group-hover:shadow-[0_35px_60px_-15px_rgba(0,0,0,0.4)]">
            <!-- Glass glow -->
            <div class="absolute inset-0 bg-gradient-to-br from-primary/20 to-accent/30 rounded-3xl blur-3xl opacity-60 group-hover:opacity-90 transition-opacity duration-700"></div>

            <img
              src="{{ member.photo.url }}"
              alt="{{ member.name }}"
              class="relative z-10 w-full aspect-[4/5] lg:aspect-square object-cover rounded-3xl shadow-2xl ring-1 ring-white/10"
              loading="lazy"
            >
          </div>
          {% else %}
          <div class="w-full aspect-square bg-gradient-to-br from-primary to-accent rounded-3xl flex items-center justify-center text-white text-8xl font-heading">
            {{ member.name|slice:":1" }}
          </div>
          {% endif %}
        </div>

        <!-- Info -->
        <div class="space-y-10 lg:pl-8">
          <div class="space-y-5">
            <h1 class="text-6xl md:text-8xl font-heading font-black tracking-tight bg-gradient-to-r from-primary via-accent to-primary bg-[length:200%_auto] bg-clip-text text-transparent animate-gradient-x">
              {{ member.name }}
            </h1>
            <p class="text-3xl md:text-4xl font-semibold text-gray-800 dark:text-gray-200">
              {{ member.role }}
            </p>
            {% if member.tagline %}
            <p class="text-xl md:text-2xl italic text-accent/90 font-medium">
              “{{ member.tagline }}”
            </p>
            {% endif %}
          </div>

          <!-- Contact -->
          <div class="flex flex-wrap gap-4">
            {% if member.email %}
            <a href="mailto:{{ member.email }}" class="inline-flex items-center gap-2 px-6 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-full hover:bg-white/20 transition text-sm font-medium">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z" /><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z" /></svg>
              {{ member.email }}
            </a>
            {% endif %}
            {% if member.phone %}
            <a href="tel:{{ member.phone }}" class="inline-flex items-center gap-2 px-6 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-full hover:bg-white/20 transition text-sm font-medium">
              <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" /></svg>
              {{ member.phone }}
            </a>
            {% endif %}
            {% if member.linkedin %}
            <a href="{{ member.linkedin }}" target="_blank" class="px-6 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-full hover:bg-white/20 transition text-sm font-medium">
              LinkedIn
            </a>
            {% endif %}
            {% if member.twitter %}
            <a href="{{ member.twitter }}" target="_blank" class="px-6 py-3 bg-white/10 backdrop-blur-lg border border-white/20 rounded-full hover:bg-white/20 transition text-sm font-medium">
              X
            </a>
            {% endif %}
          </div>

          <!-- Skills – animated radial -->
          <div class="mt-16">
            <h3 class="text-3xl font-heading font-bold mb-10 text-center md:text-left bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">
              Core Strengths
            </h3>
            <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-8 md:gap-12">
              {% for skill in member.skills.all %}
              <div class="flex flex-col items-center group">
                <div class="relative w-28 h-28 md:w-32 md:h-32">
                  <svg class="w-full h-full -rotate-90" viewBox="0 0 100 100">
                    <circle cx="50" cy="50" r="45" fill="none" stroke="currentColor" stroke-width="10" class="text-gray-200/50 dark:text-gray-800/50" />
                    <circle cx="50" cy="50" r="45" fill="none" stroke="url(#skillgradient)" stroke-width="10" stroke-linecap="round"
                            stroke-dasharray="283" stroke-dashoffset="283"
                            class="transition-all duration-1500 ease-out group-hover:stroke-accent">
                      <animate attributeName="stroke-dashoffset" from="283" to="{{ 283|div:100|mul:skill.percentage|sub:283 }}" dur="1.8s" fill="freeze" />
                    </circle>
                    <defs>
                      <linearGradient id="skillgradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" stop-color="#0f766e" />
                        <stop offset="100%" stop-color="#14b8a6" />
                      </linearGradient>
                    </defs>
                  </svg>
                  <div class="absolute inset-0 flex items-center justify-center text-3xl font-bold text-gray-800 dark:text-gray-200 group-hover:text-accent transition-colors">
                    {{ skill.percentage }}%
                  </div>
                </div>
                <p class="mt-4 text-center font-medium text-lg">{{ skill.name }}</p>
              </div>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Bio -->
  <section class="py-24 bg-gradient-to-b from-transparent via-white/40 to-transparent dark:via-black/40">
    <div class="container mx-auto px-6 lg:px-8 max-w-4xl prose lg:prose-xl dark:prose-invert">
      {{ member.full_bio|safe }}
    </div>
  </section>

  <!-- Related -->
  {% if related_members %}
  <section class="py-24">
    <div class="container mx-auto px-6 lg:px-8">
      <h2 class="text-4xl md:text-5xl font-heading font-bold text-center mb-16 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">
        Meet More Innovators
      </h2>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12">
        {% for rel in related_members %}
        <a href="{% url 'core:member-detail' rel.slug %}" class="group block">
          <div class="relative overflow-hidden rounded-3xl shadow-xl transition-all duration-500 group-hover:scale-105 group-hover:shadow-2xl">
            {% if rel.photo %}
            <img src="{{ rel.photo.thumbnail.600x600 }}" alt="{{ rel.name }}" class="w-full aspect-square object-cover transition-transform duration-700 group-hover:scale-110">
            {% endif %}
            <div class="absolute inset-0 bg-gradient-to-t from-black/70 via-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
            <div class="absolute bottom-0 left-0 right-0 p-8 text-white transform translate-y-6 group-hover:translate-y-0 transition-transform duration-500">
              <h3 class="text-2xl font-bold mb-1">{{ rel.name }}</h3>
              <p class="text-accent text-lg">{{ rel.role }}</p>
            </div>
          </div>
        </a>
        {% endfor %}
      </div>
    </div>
  </section>
  {% endif %}

  {% placeholder "Extra Content" or %}
</div>

{% addtoblock "js" %}
<script>
  // Optional: simple reveal on scroll (can add GSAP later)
  document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.group').forEach(el => {
      el.classList.add('opacity-0', 'translate-y-8');
      setTimeout(() => el.classList.remove('opacity-0', 'translate-y-8'), 100);
    });
  });
</script>
{% endaddtoblock %}

{% endblock %}